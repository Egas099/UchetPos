(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ec58891"],{"0e4a":function(t,e,s){},"8ab6":function(t,e,s){"use strict";var o=s("0e4a"),a=s.n(o);a.a},ac61:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=this,s=e.$createElement,o=e._self._c||s;return o("div",{staticClass:"choicefornew content_wrapper"},[o("form",{on:{submit:function(t){return t.preventDefault(),e.save_attendance(t)}}},[o("fieldset",{attrs:{id:"main_fieldset"}},[o("div",{staticClass:"head"},[o("span",[e._v("Группы:")]),o("input",{staticClass:"green_button",attrs:{type:"button",value:"Добавить"},on:{click:function(){e.window_on=!e.window_on}}})]),o("div",{staticStyle:{clear:"both"}}),o("transition-group",{attrs:{name:"list",tag:"p"}},e._l(this.$store.state.n.groups,(function(t,s){return o("span",{key:t.num,staticClass:"list-item"},[e._v(" "+e._s(t.num)+" "),o("button",{staticClass:"krestik",on:{click:function(t){return t.preventDefault(),e.remoteGroup(s)}}},[e._v("×")])])})),0),o("input",{directives:[{name:"model",rawName:"v-model",value:e.selSub,expression:"selSub"}],staticClass:"inp",attrs:{type:"list",list:"pred",placeholder:"Выберите предмет",required:""},domProps:{value:e.selSub},on:{input:function(t){t.target.composing||(e.selSub=t.target.value)}}}),o("datalist",{attrs:{id:"pred"}},e._l(this.$store.state.subjects,(function(t){return o("option",{key:t.name},[e._v(e._s(t.name))])})),0),o("input",{directives:[{name:"model",rawName:"v-model",value:e.selDate,expression:"selDate"}],staticClass:"inp",attrs:{placeholder:"Введите дату",type:"date",required:""},domProps:{value:e.selDate},on:{input:function(t){t.target.composing||(e.selDate=t.target.value)}}}),o("button",{staticClass:"green_button",attrs:{type:"submit"}},[e._v("Отметить посещение")])],1)]),o("transition",{attrs:{name:"list"}},[e.window_on?o("form",{staticClass:"form_new_group",on:{submit:function(t){return t.preventDefault(),e.addNewGroup(t)}}},[o("div",[o("fieldset",{staticClass:"list"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.newGroupText,expression:"newGroupText"}],staticClass:"inp",attrs:{placeholder:"Введите номер группы",required:""},domProps:{value:e.newGroupText},on:{input:function(t){t.target.composing||(e.newGroupText=t.target.value)}}}),o("input",{staticClass:"green_button",attrs:{type:"submit",value:"Сохранить",id:"button_save_group"}})])])]):e._e()]),e.load?o("div",{staticClass:"loading"},[o("div",{staticClass:"load_data"},[e._v("Загружаем данные...")]),o("div",{staticClass:"load_error"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.load_error||e.load_text,expression:"load_error || load_text"}],staticClass:"load_data"},[o("div",[e._v(" "+e._s(e.load_text)),o("br"),e._v(e._s(e.load_error)),o("br")]),o("button",{staticClass:"green_button",on:{click:function(){t.load=!1,t.load_error="",t.load_text=""}}},[e._v("Продолжить ")])])])]):e._e()],1)},a=[],n=(s("4160"),s("159b"),s("bc3a")),r=s.n(n),i={data:function(){return{load:!1,load_text:"",load_error:"",window_on:!1,newGroupText:"",groups:[],selSub:this.$store.state.n.selectSubject,selDate:this.$store.state.n.selectDate,studsInLess:[]}},mounted:function(){this.$store.state.a.prepod||this.$router.push("/")},methods:{created_less:function(){},save_attendance:function(){var t=this;this.$store.commit("clear_groups"),this.$store.commit("select_sub_and_date",{selDate:this.selDate,selSub:this.selSub});var e="";this.load=!0,0===this.$store.state.n.groups.length&&(this.load_text="Вы не выбрали ни одной группы"),this.$store.state.n.groups.length>1?(e+="http://kappa.cs.petrsu.ru/~pogudin/tppo/web/group?",this.$store.state.n.groups.forEach((function(t){e+="list[]=".concat(t.num,"&")})),e=e.substring(0,e.length-1)):(e+="http://kappa.cs.petrsu.ru/~pogudin/tppo/web/group/",e+="".concat(this.$store.state.n.groups[0].num)),r.a.get("".concat(e)).then((function(e){t.$store.commit("add_groups",e.data);var s=new Object;s={groups:"",predmet:t.$store.state.n.selectSubject,data:t.$store.state.n.selectDate},t.$store.state.n.groups_imp.forEach((function(t){""!==s.groups&&(s.groups+=" "),s.groups+="".concat(t.num)})),s=JSON.stringify(s),console.log(s),r.a.post("http://kappa.cs.petrsu.ru/~pogudin/tppo/web/lesson/create",s).then((function(e){t.$store.commit("change_less_id",e.data),t.load_text="Запрос выполнен",t.$router.push("/save_attendance")})).catch((function(e){console.log(e),t.load_error+=e,t.load_text="Ошибка при создании занятия: "}))})).catch((function(e){console.log(e),t.load_error+=e,t.load_text="Ошибка при запросе групп: "}))},addNewGroup:function(){this.$store.commit("new_group",this.newGroupText),this.newGroupText="",this.window_on=!this.window_on},remoteGroup:function(t){this.$store.commit("remote_group",t)}}},u=i,l=(s("8ab6"),s("2877")),c=Object(l["a"])(u,o,a,!1,null,"7f586215",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-3ec58891.1cefd18d.js.map